clear;
close all;
clc;

m = 10;
k = 20;
b = 1;
A = [0 1; -k/m -b/m];
B = [0; 1/m];
Q = [1 0; 0 1];
R = 0.001;

G = lqr(A, B, Q, R);
sim_time = 10;
dt = .001;
interval = 0.1 / dt;
tspan = 0:dt:sim_time;

x0 = [2; 5];
x = x0;
x_target = [1; 0];

for i=0:length(tspan)
    if mod(i, interval) == 0
        drawModel(x);
    end
    u = -G*x;
    dx = massSpring_ct(x, m, k, b, u);
    x = x + dx * dt;
end